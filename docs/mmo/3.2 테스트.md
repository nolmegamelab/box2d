# 테스트 

dynamic_tree 테스트가 가장 유사하다. 이걸로 하고 오브젝트 이동을 시킨다. 
랜덤 워크로 하고 쿼리가 보이도록 한다. 

여러 쓰레드에서 처리해야 하므로 고려해서 구현한다. 

## dynamic_tree 분석 

Test::MouseDown() 

- 쿼리를 실행 

## sector_tree 테스트 구현 

단일 쓰레드로 먼저 정확한 지 확인하고, 그 다음 멀티쓰레드로 테스트 한다. 

Actor들이 랜덤하게 돌아다니고 프로젝타일이 충돌을 체크하면서 다닌다. 
overlap 된 Actor들은 OBB를 다른 색으로 그려서 확인한다. 

## 그리기와 클릭 체크 

액터들 그리기를 하고, 마우스 클릭으로 충돌이 정확하게 되는 지 OBB를 
기준으로 테스트 한다. 


- 섹터 그리드 그리기 

    - Flush()를 해줘야 깜빡 거리지 않는다. 

- 액터 이동 그리기 

    - 정확하게 회전해서 잘 그려져야 한다. 
    - 회전 행렬 계산이 잘못 되었다. 

- 프로젝타일 그리기 

    - m_obb 메모리가 깨지는 현상이 나온다. 
    
        - b2SectorObject에서 m_shape를 delete 
        - collider로 쓸 때 옵션 명시하도록 수정 
    
    - 메모리 누수 문제가 있다. 
    
        - dynamic_tree 테스트도 누수가 있다. 
        - 렌더링 쪽에서 해제 안 하는 메모리가 있는 걸로 보인다. 
        - 별도 테스트를 한번 더 해야겠다. 
        - 이런 거에 당할 수도 있다. 

    - 충돌이 안 되는 경우가 있다. 

        - 위치로 보면 같은 섹터에 있는 두 오브젝트가 충돌이 안 된다. 
        - 아래 마우스 클릭 충돌로 정확성 검증을 한다. 

- 마우스 클릭 충돌 확인 
    
    - 클릭으로 모양에 따라 정확한 테스트를 진행한다. 
    - 단위 테스트를 겸하도록 한다. 
    - Pause 상태에서도 체크 가능하게 한다. 

- 정확성 검증 

    - 성능은 충분하고도 남는다. 쓰레드 분할 시 괜찮으면 된다. 
    - Circle, OBB, Triangle로 정확하게 체크한다. 
    - Pause 상태에서 Click으로 체크한다. 
    - 이걸로 거의 모든 정확성 체크가 가능하다. 
    - 해당 범위에 들어는 오브젝트들을 찾는 과정을 따라가면 된다. 
        - 정지하고 보면 되므로 디버깅도 어렵지 않다. 
        - proxyId가 m_nodes의 인덱스이기 때문에 더 수월하다.         


## 멀티 쓰레드 테스트 

정확하게 동작하면 멀티 쓰레드로 만들어 성능을 확인한다. 
지금은 매 프레임 처리하고 있으므로 부하가 높은 상태이다. 

이동을 랜덤하게 초기화 하여 프레임 분산을 하고 
일정한 간격으로 처리할 수 있게 한다. 
## 프로파일링과 최적화 
















